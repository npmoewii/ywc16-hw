(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,t,a){e.exports=a(226)},122:function(e,t,a){},131:function(e,t,a){},226:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(9),c=a.n(o),s=(a(122),a(124),a(21)),l=a.n(s),i=a(73),u=a(35),h=a(96),m=a(97),p=a(98),f=a(113),d=a(99),g=a(114),b=a(100),v=a.n(b),E=a(228),S=a(230),w=a(231),N=a(229),k=a(112),y=(a(131),a(51)),I=a.n(y),O="https://api.data.go.th/search_virtuoso/api/dataset/query?&dsname=vir_501_1497234362&path=vir_501_1497234362",j=function(){var e=Object(u.a)(l.a.mark(function e(t,a){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("".concat(O,"&loadAll=0&pageNo=").concat(a,"&pageSize=").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),x=function(){var e=Object(u.a)(l.a.mark(function e(t,a,n,r){var o,c,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=0===t?"id":"col_"+t,c="".concat(O,"&property=").concat(o,"&operator=CONTAINS&valueLiteral=").concat(a,"&loadAll=0&pageNo=").concat(r,"&pageSize=").concat(n),e.next=4,I.a.get(c);case 4:return s=e.sent,e.abrupt("return",s.data);case 6:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),C=j,D=["\u0e25\u0e33\u0e14\u0e31\u0e1a","SchoolID","SchoolName","SubDistrict","District","Province","PostCode","SchoolType","Department","Telephone","Fax","Website","Email","Latitude","Longtitude"],z=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(f.a)(this,Object(d.a)(t).call(this,e))).loader=r.a.createElement(E.a,{size:"large",className:"loader"}),a.onChange=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.onSelectChange=function(e){a.setState({filter:e})},a.search=function(){a.setState({hasMoreItems:!0,schools:[],loading:!0,currPage:1})},a.loadItems=function(){var e=Object(u.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],""!==a.state.input){e.next=7;break}return e.next=4,C(a.state.pageSize,a.state.currPage);case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,x(a.state.filter,a.state.input,a.state.pageSize,a.state.currPage);case 9:n=e.sent;case 10:n!==[]&&"-"!==n[0]["1@SchoolID"]?a.setState({schools:Object(i.a)(a.state.schools).concat(Object(i.a)(n)),loading:!1,currPage:a.state.currPage+1}):a.setState({hasMoreItems:!1,loading:!1});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.renderSchool=function(){return a.state.schools.map(function(e){return r.a.createElement(S.a,{className:"schoolItem",key:e["1@SchoolID"],title:e["2@SchoolName"]},D.map(function(t,a){return[1,2,3,4,5,6,7,9].includes(a)?r.a.createElement("p",{key:e["1@SchoolID"]+t},r.a.createElement("label",{className:"info-label"},t,": ")," ",e[a+"@"+t]):null}),r.a.createElement("p",{key:e["1@SchoolID"]+"Website"},r.a.createElement("label",{className:"info-label"},"Website: "),"-"===e["11@Website"]?"-":r.a.createElement("a",{href:e["11@Website"],target:"_blank",rel:"noopener noreferrer"},e["11@Website"])))})},a.state={input:"",filter:0,schools:[],pageSize:3,hasMoreItems:!1,loading:!1,currPage:1},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.inputRef.focus()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"title"},r.a.createElement("h1",null,"THAILAND's SCHOOL INFORMATION"),r.a.createElement("h5",null,r.a.createElement("em",null,r.a.createElement("b",null,"Retrieve from: "),r.a.createElement("a",{href:"https://api.data.go.th"},"https://api.data.go.th")))),r.a.createElement("div",{className:"search"},r.a.createElement(w.a.Group,{size:"large",compact:!0},r.a.createElement(N.a,{name:"filter",onChange:this.onSelectChange,value:this.state.filter,className:"search-select"},D.map(function(e,t){return r.a.createElement(N.a.Option,{key:t,value:t},e)})),r.a.createElement(w.a,{className:"search-input",size:"large",placeholder:"Search by "+D[this.state.filter]+"...",onChange:this.onChange,value:this.state.input,name:"input",ref:function(t){e.inputRef=t},onKeyPress:function(t){"Enter"===t.key&&e.search()}})),r.a.createElement(k.a,{type:"primary",size:"large",onClick:this.search,loading:this.state.loading},"Search"))),this.state.data!==[]||this.state.loading?r.a.createElement(v.a,{pageStart:0,loadMore:this.loadItems,hasMore:this.state.hasMoreItems,loader:this.loader,className:"showSchool"},this.renderSchool()):null),r.a.createElement("footer",{className:"App-footer"},r.a.createElement("a",{href:"https://www.freepik.com/free-vector/school-building-with-small-fence-around_3297805.htm"},"Background by Katemangostar")))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[117,2,1]]]);
//# sourceMappingURL=main.088cd0ab.chunk.js.map